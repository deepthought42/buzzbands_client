
<div id="promotionUpdatePanel">
	<form name="promotionForm"
				enctype="multipart/form-data"
				ng-submit="updatePromotion(promotion)"
				novalidate>
		<div class="col-md-12">
				<img style="max-width:50%;"
						 ng-src="{{promotion.ad_location ? promotion.ad_location : 'images/venue_img_missing.jpg'}}"/>
				<div class="field">
          <h1 style="font-size:30px;font-weight:100;color:white;font-family:'Josefin Sans', sans-serif;">
						EDIT PROMOTION
					</h1>
					<input  style="margin:initial;"
									class="form-control"
									type="text"
									name="name"
									ng-model="promotion.name"
									id="newPromotionName"
									placeholder="ENTER TITLE HERE"
									required
									minlength="3"
									maxlength="250"/>

					<div ng-messages="promotionForm.name.$error" ng-if="promotionForm.$valid" class="text-danger">
						<p ng-message="required">Name is required.</p>
						<p ng-message="minlength">Name must be at least 3 characters</p>
						<p ng-repeat="validation in serverValidations['errors']">{{validation[0]}}</p>
					</div>
				</div>
				<div class="col-sm-12 col-xs-12">
					<div   filepicker api-key="AapVeFhkrSlOTwi51kt8Cz"
									pickerclass="btn addphoto"
									multiple="false"
									mimetypes="'image/*'"
									callback="previewImage(file)">
              <span>
								<i  style="margin-right:10px;"class="addphoto fa fa-camera"></i>
								Add Photo
							</span>
					</div>
				</div>
		</div>

		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
			<select ng-options="venue.id as venue.name for venue in venues"
							ng-selected="venue.id == promotion.venue_id"
							ng-model="promotion.venue_id">
			</select>
		</div>
		<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin-top:50px;">
			<div class="col-md-6 col-sm-12">
				<md-datepicker ng-model="promotion.start_time" md-placeholder="Enter date"></md-datepicker><br><br>
				<uib-timepicker  style="width:232px;background-color:#242831;" ng-model="start_time" ng-change="changed()" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"></uib-timepicker>

			</div>
			<!-- Start time date time picker popup -->
			<div id="datepicker2" class="col-md-6 col-sm-12">
				<md-datepicker ng-model="promotion.end_time"
											 md-placeholder="Enter date">
				</md-datepicker><br><br>
				<uib-timepicker  style="width:232px;background-color:#242831;"
												 ng-model="end_time"
												 ng-change="changed()"
												 hour-step="hstep"
												 minute-step="mstep"
												 show-meridian="ismeridian">
				</uib-timepicker>
			</div>

				<br><br>

		</div>
			<div class="col-sm-12" >
				<label style="color:white;" class="control-label">
				Active:
				</label>

				<input type="checkbox" ng-model="promotion.active"/>
			</div>
			<div style="margin-top:35px;" class="actions col-md-12">
				<button style="background-color:#de519b;"class="btn btn-primary"
								type="submit"
								ng-click="updatePromotion(promotion)"
								ng-disabled="promotionForm.$invalid">
					Update
				</button>
			</div>
	</form>
</div>



<div class="container-fluid">
   <div class="row">
     <div id="venueEditPanel" class="col-md-6">
       <div ng-show="hasPermission('account_user') || hasPermission('admin')" class="col-sm-12">
         <button style="max-width:100px;"
                 class="btn add-button col-sm-12"
                 ui-sref="adminDashboard.newVenue">
               <i style="font-size:40px;" class="fa fa-arrow-left"></i>
               New Venue
         </button>
       </div>
           <div class="col-md-12 text-center">
             <h1 class="font-white font-josefin">Edit Venue</h1>
           </div>
           <form name="venueForm"
                 enctype="multipart/form-data"
                 ng-submit="updateVenue(venueForm.$valid)"
                 novalidate>
                   <div class="form-group">
                     <input  class="form-control"
                             type="text"
                             name="name"
                             ng-model="venue.name"
                             id="newVenueName"
                             placeholder="Name"
                             required
                             minlength="3"
                             maxlength="250"/>
                     <div ng-messages="venueForm.name.$error"
                          ng-if="venueForm.$submitted"
                          class="text-danger">
                       <p ng-message="required">Name is required.</p>
                       <p ng-message="minlength">Name must be at least 3 characters</p>
                     </div>
                   </div>
                   <div class="form-group">
                     <select class="form-control"
                             ng-options="category for category in categories"
                             ng-model="venue.category"
                             ng-selected="category == venue.category"
                             ng-required>
                       <option value="" ng-selected>Select Category</option>
                     </select>
                   </div>
                   <div  style="text-align:center;" class="form-group">
                     <div filepicker api-key="AapVeFhkrSlOTwi51kt8Cz"
                         pickerclass="btn btn-primary buzzbands-btn"
                         mimetypes="'image/*'"
                         callback="previewImage(file)"
                         multiple=false>
                       <i style="margin-right:10px;"class="fa fa-camera"></i>
                       Add Photo
                     </div>
                   </div>
                   <div class="form-group">
                     <input  class="form-control"
                             type="text"
                             name="address"
                             ng-model="venue.address"
                             id="newVenueAddress"
                             placeholder="Street"
                             required
                             minlength="3"
                             maxlength="250" />
                     <div ng-messages="venueForm.address.$error"
                          ng-if="venueForm.$submitted"
                          class="text-danger">
                       <p ng-message="required">Street address is required.</p>
                       <p ng-message="minlength">Street address must be at least 3 characters</p>
                     </div>
                   </div>
                   <div class="form-group">
                     <input  class="form-control"
                             type="text"
                             name="city"
                             ng-model="venue.city"
                             id="newVenueCity"
                             placeholder="City"
                             required
                             minlength="3"
                             maxlength="250"/>
                     <div ng-messages="venueForm.city.$error" ng-if="venueForm.$submitted" class="text-danger">
                       <p ng-message="required">City is required.</p>
                       <p ng-message="minlength">City must be at least 3 characters</p>
                     </div>
                   </div>
                   <div class="form-group">
                     <input  class="form-control"
                             type="text"
                             name="state"
                             ng-model="venue.state"
                             id="newVenueState"
                             placeholder="State"
                             required
                             minlength="2"
                             maxlength="2"/>
                     <div ng-messages="venueForm.state.$error" ng-if="venueForm.$submitted" class="text-danger">
                       <p ng-message="required">State is required.</p>
                       <p ng-message="minlength">State must be 2 letter abbreviation</p>
                     </div>
                   </div>
                   <div class="form-group">
                     <input  class="form-control"
                             type="text"
                             name="zip_code"
                             ng-model="venue.zip_code"
                             id="newVenueZipCode"
                             placeholder="Zip Code"
                             required
                             minlength="5"
                             maxlength="5"
                             pattern="[0-9]*"
                             venue-name-availability-validator="/venues.json"/>
                     <div ng-messages="venueForm.zip_code.$error" ng-if="venueForm.$submitted" class="text-danger">
                       <p ng-message="required">Zip code is required.</p>
                       <p ng-message="minlength">Zip code must be 5 digits.</p>
                       <p ng-message="pattern">Zip code can only contain numbers.</p>
                     </div>
                   </div>
                 <div class="col-sm-12 text-center">
                   Active?
                   <input type="checkbox" ng-model="venue.active" ng-disabled="isAdmin()" />
                  </div>
									<div class="actions col-md-12 text-center">
                   <button type="submit" class="btn btn-primary buzzbands-btn buzzbands-pink-btn" >
                     <i class="fa fa-save"></i>
                     Save
                   </button>
                  </div>
								</form>
      </div>
      <div class="col-md-6">

        <img class="img-responsive" ng-src="{{venue.url ? venue.url : 'images/logo.png'}}" />
    </div>
	</div>
</div>
